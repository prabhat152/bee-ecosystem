<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beehive Ecosystem Knowledge Graph</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; }
        .link { stroke: #999; stroke-opacity: 0.6; }
        .node { stroke: #fff; stroke-width: 1.5px; }
        .label { font-size: 12px; font-family: sans-serif; fill: black; }
    </style>
</head>
<body>

    <h2>Beehive Ecosystem Knowledge Graph</h2>
    <svg width="900" height="600"></svg>

    <script>
        const nodes = [
            { id: "Queen Bee", color: "yellow" },
            { id: "Worker Bee", color: "yellow" },
            { id: "Drone Bee", color: "yellow" },
            { id: "Hive", color: "green" },
            { id: "Honeycomb", color: "green" },
            { id: "Pollen", color: "red" },
            { id: "Nectar", color: "red" },
            { id: "Egg", color: "yellow" },
            { id: "Larva", color: "yellow" },
            { id: "Pupa", color: "yellow" },
            { id: "Foraging", color: "green" },
            { id: "Flower", color: "red" },
            { id: "Tree", color: "green" },
            { id: "Pesticides", color: "red" },
            { id: "Beekeeper", color: "green" },
            { id: "Smoke", color: "red" },
            { id: "Hive Entrance", color: "green" },
            { id: "Wax", color: "green" },
            { id: "Bee Dance", color: "yellow" },
            { id: "Honey", color: "green" },
            { id: "Predator", color: "red" },
            { id: "Mite", color: "red" },
            { id: "Sun", color: "green" },
            { id: "Water", color: "blue" },
            { id: "Bee Suit", color: "green" }
        ];

        const links = [
            { source: "Queen Bee", target: "Egg", label: "lays" },
            { source: "Egg", target: "Larva", label: "hatches into" },
            { source: "Larva", target: "Pupa", label: "develops into" },
            { source: "Pupa", target: "Worker Bee", label: "emerges as" },
            { source: "Worker Bee", target: "Honeycomb", label: "builds" },
            { source: "Worker Bee", target: "Foraging", label: "performs" },
            { source: "Foraging", target: "Flower", label: "collects nectar from" },
            { source: "Flower", target: "Nectar", label: "contains" },
            { source: "Worker Bee", target: "Bee Dance", label: "performs" },
            { source: "Bee Dance", target: "Worker Bee", label: "guides" },
            { source: "Nectar", target: "Honey", label: "is processed into" },
            { source: "Honeycomb", target: "Honey", label: "stores" },
            { source: "Hive", target: "Worker Bee", label: "houses" },
            { source: "Hive", target: "Queen Bee", label: "houses" },
            { source: "Hive", target: "Drone Bee", label: "houses" },
            { source: "Hive", target: "Egg", label: "houses" },
            { source: "Predator", target: "Hive", label: "attacks" },
            { source: "Mite", target: "Worker Bee", label: "infests" },
            { source: "Pesticides", target: "Flower", label: "contaminates" },
            { source: "Pesticides", target: "Worker Bee", label: "harms" },
            { source: "Sun", target: "Flower", label: "helps grow" },
            { source: "Water", target: "Flower", label: "helps grow" },
            { source: "Beekeeper", target: "Hive", label: "manages" },
            { source: "Beekeeper", target: "Bee Suit", label: "wears" },
            { source: "Beekeeper", target: "Smoke", label: "uses" },
            { source: "Smoke", target: "Worker Bee", label: "calms" }
        ];

        const width = 900, height = 600;
        const svg = d3.select("svg");
        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(100))
            .force("charge", d3.forceManyBody().strength(-300))
            .force("center", d3.forceCenter(width / 2, height / 2));

        const link = svg.selectAll("line")
            .data(links)
            .enter().append("line")
            .attr("class", "link");

        const node = svg.selectAll("circle")
            .data(nodes)
            .enter().append("circle")
            .attr("r", 10)
            .attr("fill", d => d.color)
            .call(d3.drag()
                .on("start", dragStarted)
                .on("drag", dragged)
                .on("end", dragEnded));

        const labels = svg.selectAll("text")
            .data(nodes)
            .enter().append("text")
            .attr("class", "label")
            .attr("dx", 12)
            .attr("dy", ".35em")
            .text(d => d.id);

        function ticked() {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node
                .attr("cx", d => d.x)
                .attr("cy", d => d.y);

            labels
                .attr("x", d => d.x)
                .attr("y", d => d.y);
        }

        function dragStarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragEnded(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        simulation.on("tick", ticked);
    </script>

</body>
</html>
